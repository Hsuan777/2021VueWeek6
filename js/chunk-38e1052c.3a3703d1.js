(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38e1052c"],{"0cb2":function(t,e,a){var n=a("7b0b"),r=Math.floor,c="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,a,o,l,u){var d=a+t.length,b=o.length,f=i;return void 0!==l&&(l=n(l),f=s),c.call(u,f,(function(n,c){var s;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,a);case"'":return e.slice(d);case"<":s=l[c.slice(1,-1)];break;default:var i=+c;if(0===i)return n;if(i>b){var u=r(i/10);return 0===u?n:u<=b?void 0===o[u-1]?c.charAt(1):o[u-1]+c.charAt(1):n}s=o[i-1]}return void 0===s?"":s}))}},"14c3":function(t,e,a){var n=a("c6b6"),r=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var c=a.call(t,e);if("object"!==typeof c)throw TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"1dde":function(t,e,a){var n=a("d039"),r=a("b622"),c=a("2d00"),s=r("species");t.exports=function(t){return c>=51||!n((function(){var e=[],a=e.constructor={};return a[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},5319:function(t,e,a){"use strict";var n=a("d784"),r=a("825a"),c=a("50c4"),s=a("a691"),i=a("1d80"),o=a("8aa5"),l=a("0cb2"),u=a("14c3"),d=Math.max,b=Math.min,f=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,a,n){var p=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=n.REPLACE_KEEPS_$0,v=p?"$":"$0";return[function(a,n){var r=i(this),c=void 0==a?void 0:a[t];return void 0!==c?c.call(a,r,n):e.call(String(r),a,n)},function(t,n){if(!p&&h||"string"===typeof n&&-1===n.indexOf(v)){var i=a(e,t,this,n);if(i.done)return i.value}var m=r(t),g=String(this),O="function"===typeof n;O||(n=String(n));var x=m.global;if(x){var j=m.unicode;m.lastIndex=0}var y=[];while(1){var w=u(m,g);if(null===w)break;if(y.push(w),!x)break;var E=String(w[0]);""===E&&(m.lastIndex=o(g,c(m.lastIndex),j))}for(var C="",k=0,L=0;L<y.length;L++){w=y[L];for(var $=String(w[0]),A=d(b(s(w.index),g.length),0),S=[],I=1;I<w.length;I++)S.push(f(w[I]));var R=w.groups;if(O){var _=[$].concat(S,A,g);void 0!==R&&_.push(R);var U=String(n.apply(void 0,_))}else U=l($,g,A,S,R,n);A>=k&&(C+=g.slice(k,A)+U,k=A+$.length)}return C+g.slice(k)}]}))},"65f0":function(t,e,a){var n=a("861d"),r=a("e8b5"),c=a("b622"),s=c("species");t.exports=function(t,e){var a;return r(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?n(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},8418:function(t,e,a){"use strict";var n=a("c04e"),r=a("9bf2"),c=a("5c6c");t.exports=function(t,e,a){var s=n(e);s in t?r.f(t,s,c(0,a)):t[s]=a}},"8aa5":function(t,e,a){"use strict";var n=a("6547").charAt;t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},9263:function(t,e,a){"use strict";var n=a("ad6d"),r=a("9f7f"),c=a("5692"),s=RegExp.prototype.exec,i=c("native-string-replace",String.prototype.replace),o=s,l=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=r.UNSUPPORTED_Y||r.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],b=l||d||u;b&&(o=function(t){var e,a,r,c,o=this,b=u&&o.sticky,f=n.call(o),p=o.source,h=0,v=t;return b&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),v=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,h++),a=new RegExp("^(?:"+p+")",f)),d&&(a=new RegExp("^"+p+"$(?!\\s)",f)),l&&(e=o.lastIndex),r=s.call(b?a:o,v),b?r?(r.input=r.input.slice(h),r[0]=r[0].slice(h),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:l&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),d&&r&&r.length>1&&i.call(r[0],a,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(r[c]=void 0)})),r}),t.exports=o},"99af":function(t,e,a){"use strict";var n=a("23e7"),r=a("d039"),c=a("e8b5"),s=a("861d"),i=a("7b0b"),o=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),b=a("b622"),f=a("2d00"),p=b("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",m=f>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=d("concat"),O=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:c(t)},x=!m||!g;n({target:"Array",proto:!0,forced:x},{concat:function(t){var e,a,n,r,c,s=i(this),d=u(s,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(c=-1===e?s:arguments[e],O(c)){if(r=o(c.length),b+r>h)throw TypeError(v);for(a=0;a<r;a++,b++)a in c&&l(d,b,c[a])}else{if(b>=h)throw TypeError(v);l(d,b++,c)}return d.length=b,d}})},"9f7f":function(t,e,a){"use strict";var n=a("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,a){"use strict";var n=a("23e7"),r=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(t,e,a){"use strict";var n=a("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b0c0:function(t,e,a){var n=a("83ab"),r=a("9bf2").f,c=Function.prototype,s=c.toString,i=/^\s*function ([^ (]*)/,o="name";n&&!(o in c)&&r(c,o,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(t){return""}}})},b64b:function(t,e,a){var n=a("23e7"),r=a("7b0b"),c=a("df75"),s=a("d039"),i=s((function(){c(1)}));n({target:"Object",stat:!0,forced:i},{keys:function(t){return c(r(t))}})},b7c8:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b64b");var n=a("7a23"),r={class:"container my-5"},c={key:0,class:"row"},s={class:"col-lg-6"},i=Object(n["i"])("h2",null,"訂購人資訊",-1),o={class:"row row-cols-1 g-3"},l={class:"col"},u=Object(n["i"])("label",{for:"userName",class:"form-label"},[Object(n["h"])("訂購人姓名 "),Object(n["i"])("span",{class:"text-danger"},"*")],-1),d={class:"col"},b=Object(n["i"])("label",{for:"userEmail",class:"form-label"},[Object(n["h"])("聯絡信箱 "),Object(n["i"])("span",{class:"text-danger"},"*")],-1),f={class:"col"},p=Object(n["i"])("label",{for:"userTel",class:"form-label"},[Object(n["h"])("手機號碼 "),Object(n["i"])("span",{class:"text-danger"},"*")],-1),h={class:"col"},v=Object(n["i"])("label",{for:"userAddress",class:"form-label"},[Object(n["h"])("聯絡地址(餐飲外送用) "),Object(n["i"])("span",{class:"text-danger"},"*")],-1),m={class:"col"},g=Object(n["i"])("label",{for:"userMessage",class:"form-label"},"備註",-1),O={class:"col-lg-6"},x={class:"d-flex align-items-center mb-lg-3"},j=Object(n["i"])("h2",{class:"mb-0"},"購物車列表",-1),y=Object(n["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-cart-x",viewBox:"0 0 16 16"},[Object(n["i"])("path",{d:"M7.354 5.646a.5.5 0 1 0-.708.708L7.793 7.5 6.646 8.646a.5.5 0 1 0\n              .708.708L8.5 8.207l1.146 1.147a.5.5 0 0 0 .708-.708L9.207 7.5l1.147-1.146a.5.5\n              0 0 0-.708-.708L8.5 6.793 7.354 5.646z"}),Object(n["i"])("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2\n              0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0\n              .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102\n              4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1\n              1 0 0 1 2 0z"})],-1),w={class:"list-group"},E={class:"d-flex align-items-center"},C={class:"d-flex justify-content-between align-items-center"},k={class:"h6 mb-0 me-3"},L={key:0,class:"spinner-border spinner-border-sm text-danger ms-auto me-3",role:"status"},$=Object(n["i"])("span",{class:"visually-hidden"},"Loading...",-1),A={key:1,class:"input-group w-50"},S={class:"text-primary"},I={class:"list-group-item border-0"},R={class:"d-flex"},_=Object(n["h"])("商品合計 "),U={class:"h5 text-dark ms-auto"},D={class:"d-flex"},T=Object(n["h"])("訂單總計 "),P={class:"h4 text-danger ms-auto"},V={class:"input-group w-50 ms-auto"};function B(t,e,a,B,M,N){var q=Object(n["B"])("loading"),F=Object(n["B"])("Field"),z=Object(n["B"])("error-message"),K=Object(n["B"])("Form"),H=Object(n["B"])("router-link");return Object(n["u"])(),Object(n["e"])(n["a"],null,[Object(n["i"])(q,{active:M.isLoading.status},null,8,["active"]),Object(n["i"])("div",r,[M.cartsData.carts[0]?(Object(n["u"])(),Object(n["e"])("div",c,[Object(n["i"])("section",s,[i,Object(n["i"])(K,{action:"",ref:"orderForm",onSubmit:N.postOrder},{default:Object(n["L"])((function(t){var a=t.errors;return[Object(n["i"])("div",o,[Object(n["i"])("div",l,[u,Object(n["i"])(F,{id:"userName",name:"訂購人姓名",type:"text",class:["form-control",{"is-invalid":a["訂購人姓名"]}],rules:"required",modelValue:M.order.user.name,"onUpdate:modelValue":e[1]||(e[1]=function(t){return M.order.user.name=t})},null,8,["class","modelValue"]),Object(n["i"])(z,{name:"訂購人姓名",class:"invalid-feedback"})]),Object(n["i"])("div",d,[b,Object(n["i"])(F,{id:"userEmail",name:"聯絡信箱",type:"email",class:["form-control",{"is-invalid":a["聯絡信箱"]}],rules:"email|required",modelValue:M.order.user.email,"onUpdate:modelValue":e[2]||(e[2]=function(t){return M.order.user.email=t})},null,8,["class","modelValue"]),Object(n["i"])(z,{name:"聯絡信箱",class:"invalid-feedback"})]),Object(n["i"])("div",f,[p,Object(n["i"])(F,{id:"userTel",name:"手機號碼",type:"tel",class:["form-control",{"is-invalid":a["手機號碼"]}],rules:N.checkPhone,modelValue:M.order.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return M.order.user.tel=t})},null,8,["class","rules","modelValue"]),Object(n["i"])(z,{name:"手機號碼",class:"invalid-feedback"})]),Object(n["i"])("div",h,[v,Object(n["i"])(F,{id:"userAddress",name:"聯絡地址",type:"text",class:["form-control",{"is-invalid":a["聯絡地址"]}],rules:"required",modelValue:M.order.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return M.order.user.address=t})},null,8,["class","modelValue"]),Object(n["i"])(z,{name:"聯絡地址",class:"invalid-feedback"})]),Object(n["i"])("div",m,[g,Object(n["i"])(F,{id:"userMessage",name:"備註",type:"text",class:["form-control",{"is-invalid":a["備註"]}],rules:"",modelValue:M.order.message,"onUpdate:modelValue":e[5]||(e[5]=function(t){return M.order.message=t}),as:"textarea",rows:"3"},null,8,["class","modelValue"]),Object(n["i"])(z,{name:"備註",class:"invalid-feedback"})]),Object(n["i"])("input",{type:"submit",value:"送出訂單",class:"btn btn-primary text-white",disabled:0!==Object.keys(a).length},null,8,["disabled"])])]})),_:1},8,["onSubmit"])]),Object(n["i"])("section",O,[Object(n["i"])("header",x,[j,Object(n["i"])("button",{type:"button",class:"btn btn-link link-secondary ms-auto",onClick:e[6]||(e[6]=function(){return N.deleteCartAll&&N.deleteCartAll.apply(N,arguments)})},[y])]),Object(n["i"])("ul",w,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(M.cartsData.carts,(function(t){return Object(n["u"])(),Object(n["e"])("li",{class:"list-group-item",key:t.id},[Object(n["i"])("div",E,[Object(n["i"])(H,{to:"/product/".concat(t.product.id),class:"me-5"},{default:Object(n["L"])((function(){return[Object(n["h"])(Object(n["E"])(t.product.title),1)]})),_:2},1032,["to"]),Object(n["i"])("input",{type:"button",value:"X",class:"btn btn-link btn-sm pe-0 text-decoration-none link-secondary ms-auto",onClick:function(e){return N.deleteCart(t.id)}},null,8,["onClick"])]),Object(n["i"])("div",C,[Object(n["i"])("p",k,Object(n["E"])("$"+t.product.price+" x "),1),M.isLoading.itemID===t.id?(Object(n["u"])(),Object(n["e"])("div",L,[$])):(Object(n["u"])(),Object(n["e"])("div",A,[Object(n["i"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:function(e){return N.putCart(t,t.qty-1)},disabled:t.qty-1===0}," - ",8,["onClick","disabled"]),Object(n["i"])("input",{type:"text",class:"form-control text-center text-danger",placeholder:"",value:t.qty,disabled:""},null,8,["value"]),Object(n["i"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:function(e){return N.putCart(t,t.qty+1)}}," + ",8,["onClick"])])),Object(n["i"])("span",S,Object(n["E"])("$"+t.total),1)])])})),128)),Object(n["i"])("li",I,[Object(n["i"])("p",R,[_,Object(n["i"])("span",U,Object(n["E"])("$"+M.cartsData.total),1)]),Object(n["i"])("p",D,[T,Object(n["i"])("span",P,Object(n["E"])("$"+Math.floor(M.cartsData.final_total)),1)]),Object(n["i"])("div",V,[Object(n["M"])(Object(n["i"])("input",{type:"text",class:"form-control text-danger",placeholder:"請輸入優惠券代碼","onUpdate:modelValue":e[7]||(e[7]=function(t){return M.couponCode=t})},null,512),[[n["H"],M.couponCode]]),Object(n["i"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[8]||(e[8]=function(){return N.postCoupon&&N.postCoupon.apply(N,arguments)})},"套用")])])])])])):Object(n["f"])("",!0)])],64)}a("99af"),a("ac1f"),a("5319");var M={data:function(){return{isLoading:{itemID:"",status:!1},cartsData:{carts:[]},order:{user:{name:"",email:"",tel:"",address:""},message:""},isSubmitOrder:!1,couponCode:"test777"}},emits:["update"],props:["cartsUpdate"],methods:{getCartsList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vs","/cart");this.isLoading.status=!0,this.axios.get(e).then((function(e){t.isLoading.status=!1,e.data.success?(t.cartsData=e.data.data,t.cartsData.carts.length||t.isSubmitOrder||t.$router.replace("/productsList")):t.swal(e.data.message)})).catch((function(){t.swal("取得購物車清單有問題喔～快去看什麼問題吧！")}))},putCart:function(t,e){var a=this,n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vs","/cart/").concat(t.id),r={data:{product_id:t.product_id,qty:e}};this.isLoading.itemID=t.id,this.axios.put(n,r).then((function(t){t.data.success?(a.isLoading.itemID="",a.$emit("update"),a.getCartsList(),a.swal(t.data.message)):a.swal("".concat(t.data.message,"，請重新整理頁面。"))})).catch((function(){a.swal("無法更新資料喔～")}))},deleteCart:function(t){var e=this,a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vs","/cart/").concat(t);this.isLoading.itemID=t,this.axios.delete(a).then((function(t){t.data.success?(e.isLoading.itemID="",e.$emit("update"),e.getCartsList(),e.swal("已刪除購物車商品囉！")):e.swal(t.data.message)})).catch((function(){e.swal("無法刪除資料喔～")}))},deleteCartAll:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vs","/carts");this.axios.delete(e).then((function(e){e.data.success?(t.swal("已無商品囉！"),t.$emit("update"),t.getCartsList()):t.swal(e.data.message)})).catch((function(){t.swal("無法刪除資料喔～")}))},postCoupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vs","/coupon");this.axios.post(e,{data:{code:this.couponCode}}).then((function(e){e.data.success?(t.swal(e.data.message),t.getCartsList()):t.swal(e.data.message)})).catch((function(){t.swal("無法更新資料喔～快去看什麼問題吧！")}))},postOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vs","/order");this.axios.post(e,{data:this.order}).then((function(e){e.data.success?(t.isSubmitOrder=!0,t.swal("感謝您的選購，還請確認付款資訊，謝謝。"),t.$refs.orderForm.resetForm(),t.$emit("update"),setTimeout((function(){t.$router.replace("/order/".concat(e.data.orderId))}),2e3)):t.swal(e.data.message)})).catch((function(e){console.log(e),t.swal("無法送出訂單喔～")}))},checkPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||'需要正確的"手機"號碼'},swal:function(t){this.$swal.fire({position:"center",title:t,width:"auto",showConfirmButton:!1,timer:2e3})}},created:function(){this.getCartsList()},watch:{cartsUpdate:function(t){t&&this.getCartsList()}}};M.render=B;e["default"]=M},d784:function(t,e,a){"use strict";a("ac1f");var n=a("6eeb"),r=a("9263"),c=a("d039"),s=a("b622"),i=a("9112"),o=s("species"),l=RegExp.prototype,u=!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),b=s("replace"),f=function(){return!!/./[b]&&""===/./[b]("a","$0")}(),p=!c((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,b){var h=s(t),v=!c((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),m=v&&!c((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[o]=function(){return a},a.flags="",a[h]=/./[h]),a.exec=function(){return e=!0,null},a[h](""),!e}));if(!v||!m||"replace"===t&&(!u||!d||f)||"split"===t&&!p){var g=/./[h],O=a(h,""[t],(function(t,e,a,n,c){var s=e.exec;return s===r||s===l.exec?v&&!c?{done:!0,value:g.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),x=O[0],j=O[1];n(String.prototype,t,x),n(l,h,2==e?function(t,e){return j.call(t,this,e)}:function(t){return j.call(t,this)})}b&&i(l[h],"sham",!0)}},e8b5:function(t,e,a){var n=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-38e1052c.3a3703d1.js.map